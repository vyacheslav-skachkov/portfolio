export{work,drawProjects};import{SmootScroll,transition,webGL}from"./main.js";function work(){let e,t=new SmootScroll(document.getElementById("scrollable")),o=document.querySelector(".project-view");window.innerWidth<=1200&&o.classList.add("project-show"),document.querySelectorAll(".project").forEach(e=>e.addEventListener("click",transition)),drawProjects(!0),webGL.uniform.u_AnimationMode.value=2,t.customHandler=t=>{let i=45e-5*(window.scrollY-t);(window.scrollY>=400&&window.scrollY<=document.body.clientHeight-window.innerHeight-300||window.innerWidth<=1200)&&(clearTimeout(e),e=setTimeout(()=>o.classList.add("project-show"),30)),o.classList.remove("project-show"),webGL.uniform.u_Band.value=i>=0?Math.min(i,.08):Math.max(i,-.08),webGL.uniform.u_Progress.value=Math.max(-Math.abs(4.5*i),-.45),drawProjects(!1,t)},t.addListener()}function drawProjects(e,t){let o,i=Matrix_4x4.multiply(Matrix_4x4.setPerspectiveProjection(),Matrix_4x4.setView()),r=document.querySelector(".project-view"),n=document.querySelector(".project").clientWidth,a=getComputedStyle(document.querySelector(".project-frame")),l=webGL.data.canvas.clientHeight/2,c=n/r.clientWidth,d=(parseFloat(a.height)+parseFloat(a.marginBottom))/l,w=(r.offsetTop-r.getBoundingClientRect().top)*(1-c)/400,s=(document.body.clientHeight-window.innerHeight-t)*(1-c)/300,u=1;e?o=(window.innerHeight/2-r.clientWidth/4-r.offsetTop)/l:(u=r.clientWidth!==n?w<1-c?1-w:s<1-c?1-s:c:1,o=(l+t-r.offsetTop-r.clientWidth/4)/l),webGL.data.prepareCanvas();for(let t=0;t<r.children.length;t++){let n=e?r.children[t].getBoundingClientRect().top:0;n>-r.children[t].clientHeight-50&&n<window.innerHeight+50&&(webGL.uniform.u_Matrix.value=Matrix_4x4.multiply(i,Matrix_4x4.setTranslate(0,o-d*t,-2),Matrix_4x4.setScale(u,u,1)),webGL.data.drawFrame(webGL.program,webGL.geometry,webGL.uniform,webGL.texture[t]))}}