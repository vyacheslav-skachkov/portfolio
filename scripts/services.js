import{loadData,setStartPositionAndScroll,redirectToTarget}from"./main.js";export{services};function services(){document.querySelectorAll(".service-menu-item").forEach((e,t,r)=>e.addEventListener("click",n=>{let s=performance.now(),i=60*t+300;n.preventDefault(),loadData("node",`./templates/${n.currentTarget.pathname}.php`).then(t=>{let r=performance.now()-s;setTimeout(()=>{let r=document.getElementById("service"),n=new IntersectionObserver(changeTransparency,{threshold:1});r.addEventListener("animationend",()=>{document.querySelector(".service-name").style.visibility="visible",e.style.cssText="opacity:0;transform:translateY(-15px);transition:none;"},{once:!0}),t.querySelectorAll(".button.redirection").forEach(e=>e.addEventListener("click",e=>redirectToTarget(e))),r.replaceChildren(t),setStartPositionAndScroll(!0),r.querySelector(".link")?.addEventListener("click",redirectOnAdditionalServices),r.querySelectorAll(".step-group").forEach(e=>n.observe(e));let s=document.querySelector(".current-item"),i=document.querySelectorAll(".menu-item"),c=document.querySelector(".back-item");for(let e=0;e<i.length;e++)i[e]===s&&(c.style.left=`calc(100% * ${1/i.length*e})`);document.querySelector(".menu").classList.add("hide-current-item"),c.addEventListener("click",backToListServices)},r<i?i-r:0)}),e.classList.add("current-service"),e.style.cssText=`transform:translateY(${-e.offsetTop}px);transition:transform ${i}ms`;for(let t of r)t!==e&&(t.style.cssText="pointer-events:none;opacity:0;transform:translateY(15px);")}))}function changeTransparency(e){e.forEach(e=>{e.isIntersecting?e.target.setAttribute("data-opaque","true"):e.target.getBoundingClientRect().top>0&&e.target.setAttribute("data-opaque","")})}function backToListServices(e){let t=document.getElementById("service").firstElementChild;e.preventDefault(),document.querySelector(".menu").classList.remove("hide-current-item"),t.addEventListener("animationend",()=>{t.remove(),setStartPositionAndScroll(),document.querySelectorAll(".service-menu-item").forEach(e=>{e.classList.contains("current-service")&&e.addEventListener("transitionend",()=>e.classList.remove("current-service"),{once:!0}),e.removeAttribute("style")})},{once:!0}),t.setAttribute("data-state","hidden")}function redirectOnAdditionalServices(e){let t=performance.now();e.preventDefault(),loadData("node","./templates/services/additional_services.php").then(e=>{let r=performance.now()-t;setTimeout(()=>{e.querySelector("[data-state]").setAttribute("data-state","belowe"),e.querySelector(".service-name").style.visibility="visible",document.getElementById("service").replaceChildren(e),setStartPositionAndScroll(!0)},r<300?300-r:0)}),document.getElementById("service").firstElementChild.setAttribute("data-state","hidden"),document.querySelectorAll(".service-menu-item").forEach((e,t,r)=>{e.classList.contains("current-service")&&e.classList.remove("current-service"),t==r.length-1?(e.classList.add("current-service"),e.style.cssText="opacity:0;transform:translateY(-15px);transition:none;"):e.style.cssText="pointer-events:none;opacity:0;transform:translateY(15px);"})}